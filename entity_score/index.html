<!DOCTYPE html>
<html>
  <title>Cascade view</title>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
  </head>
  <body>
    <iframe style="position: fixed; left: 0; height: 100%; width: 320px" id="entities"></iframe>
    <iframe style="position: relative; left: 321px;" id="cascade"></iframe>
    <script type="text/javascript">
var duration = 400;
function scrollToTweet() {
    if (GetURLParameter('tweet')) {
        scrollTo(0, document.getElementById('cascade').contentWindow.document.getElementById((+GetURLParameter('tweet')).toString()).getBoundingClientRect().y - 100);
    }
};

function GetURLParameter(sParam) {
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
            return sParameterName[1];
        }
    }
    return undefined;
}

var view = GetURLParameter('view') ? GetURLParameter('view') : '1';

if (view === '1') {
    setTimeout(scrollToTweet, duration);
}

document.getElementById('entities').src = 'entities.html?cascade=' + GetURLParameter('cascade') + '&view=' + view;

if (GetURLParameter('scope')) {
    document.getElementById('cascade').src = 'cascade_' + view + '.html?cascade=' + GetURLParameter('cascade') + '&scope=' + GetURLParameter('scope');
} else if (GetURLParameter('tweet')) {
    document.getElementById('cascade').src = 'cascade_' + view + '.html?cascade=' + GetURLParameter('cascade') + '&tweet=' + GetURLParameter('tweet');
} else {
    document.getElementById('cascade').src = 'cascade_' + view + '.html?cascade=' + GetURLParameter('cascade');
}

document.getElementById('cascade').width = screen.width - 412;
document.getElementById('cascade').height = window.innerHeight - 25;
    </script>
  </body>
</html>
